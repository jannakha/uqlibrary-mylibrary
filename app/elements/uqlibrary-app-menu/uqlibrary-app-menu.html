<link rel="import" href="../elements.html">

<!--
`<uqlibrary-app-menu>` is a the main menu of the UQL Apps

Example:
    <uqlibrary-app-menu></uqlibrary-app-menu>

@demo

@demo demo/index.html Demo of the Full view
-->
<dom-module id="uqlibrary-app-menu">
  <!-- All element styles -->
  <style is="custom-style" include="iron-flex iron-flex-alignment common-styles">
    :host {
      font-family: var(--font-family);
      font-size: var(--body-font-size);

      height: 100%;
      display: block;
      background-color: #FFF;
    }

    /** Top of menu styles */
    .account {
      background: url('../../images/menutop.jpg') 100%;
      background-size: cover;
      border-bottom: 1px solid #CCC;
    }

    .gradient {
      background: -moz-linear-gradient(top,transparent 30%,#000 100%);
      background: -webkit-linear-gradient(top,transparent 30%,#000 100%);
      background: -o-linear-gradient(top,transparent 30%,#000 100%);
      background: -ms-linear-gradient(top,transparent 30%,#000 100%);
      background: linear-gradient(to bottom,transparent 30%,#000 100%);

      @apply(--layout-horizontal-reverse);
      @apply(--layout-end-justified);
    }

    .details {
      padding: 110px 14px 14px 16px;
    }

    .gradient paper-icon-button {
      @apply(--layout-self-end);
      color: #FFF;
      margin-bottom: 8px;
      margin-right: 8px;
      padding: 2px;
    }

    /** Menu item styles */
    paper-menu {
      --paper-menu-selected-item: {
        color: var(--accent-color-dark);
      };

      --paper-menu-focused-item-after: {
        background: var(--accent-color-dark);
      };
    }

    paper-menu iron-icon {
      margin-right: 33px;
      color: var(--secondary-color);
    }

    paper-menu a {
      @apply(--layout-horizontal);
      @apply(--layout-center);

      text-decoration: none;
      padding: 12px 24px;
    }

    paper-menu a span {

      color: var(--secondary-color);
      line-height: 18px;
      font-size: 16px;
    }

    paper-menu a:hover {
      background-color: var(--secondary-color-light);
    }

    .divider {
      border-bottom: 1px solid var(--border-color);
    }
  </style>

  <!-- Template -->
  <template>
    <uqlibrary-api-account id="apiAccount"></uqlibrary-api-account>
    <uqlibrary-api-applications id="apiApplications" user="{{_account}}"></uqlibrary-api-applications>

    <!-- Top of menu -->
    <template is="dom-if" if="{{_account.hasSession}}">
      <div class="account">
        <div class="gradient">
          <paper-icon-button icon="lock" aria-label="Logout" title="Logout" on-tap="{{toggleLogout}}"></paper-icon-button>
          <div class="details flex">
            <div class="menu inverse">{{_account.name}}</div>
            <div class="menu inverse">{{_account.mail}}</div>
          </div>
        </div>
      </div>
    </template>

    <!-- Menu -->
    <paper-menu class="app-menu" attr-for-selected="data-route" selected="[[route]]">
      <template is="dom-repeat" items="{{ _applications }}">
        <!-- Divider -->
        <template is="dom-if" if="{{item.isDivider}}">
          <div class="divider"></div>
        </template>
        <!-- Menu item -->
        <template is="dom-if" if="{{item.isLink}}">
          <!-- External link -->
          <template is="dom-if" if="{{item.isExternal}}">
            <a href="{{item.link}}" aria-label="{{item.description}}">
              <iron-icon icon="{{item.icon}}"></iron-icon>
              <span>{{item.title}}</span>
            </a>
          </template>
          <!-- Internal link -->
          <template is="dom-if" if="{{!item.isExternal}}">
            <a data-route="{{item.route}}" href="{{item.href}}" aria-label="{{item.description}}">
              <iron-icon icon="{{item.icon}}"></iron-icon>
              <span>{{item.title}}</span>
            </a>
          </template>
        </template>
      </template>
    </paper-menu>
  </template>

  <!-- Location of the script -->
  <script src="uqlibrary-app-menu.js"></script>
</dom-module>
